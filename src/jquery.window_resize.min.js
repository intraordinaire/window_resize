/*
 * windowResize
 * Attach it to the window to delay it, catch if resize is more important than XXpx or simply to  catch the good IE resize event (IE < 9)
 * Latest version and complete README available on Github:
 * https://github.com/intraordinaire/window_resize
 * @version 1.0.1
 * Copyright 2012 Vincent Garcia
 * @author Vincent Garcia https://github.com/intraordinaire/
 * Licensed under the MIT license.
 */
(function(e){e.windowResize=function(t,n){this.settings=e.extend(true,{},e.windowResize.defaults,n);this.element=t;this.init()};e.extend(e.windowResize,{window_height:0,window_width:0,timer:0,evt:null,defaults:{timeout:0,callback:null,diff_height:false,step_height:false,diff_width:false,step_width:false,type:"both"},prototype:{init:function(){if(this.settings.callback==null){return}if(this.settings.type!="both"&&this.settings.type!="width"&&this.settings.type!="height"){this.settings.type="both"}var t=e(window);this.window_height=t.height();this.window_width=t.width();t.resize(e.proxy(this,"handleResize"))},handleResize:function(e){this.evt=e;this.triggerResize()},triggerResize:function(){if(this.isResized()){if(this.settings.timeout!=false&&!isNaN(this.settings.timeout)){this.delayEvent()}else{this.sendEvent()}}return false},sendEvent:function(){return this.settings.callback.apply(this,[this.evt])},isResized:function(){if(e.browser.msie&&parseInt(e.browser.version,10)<9||this.settings.diff_height!=false||this.settings.diff_width!=false||this.settings.step_height!=false||this.settings.step_width!=false||this.settings.type!="both"){var t=e(window).height();var n=this.checkHeight(t);var r=e(window).width();var i=this.checkWidth(r);if(this.settings.type=="both"&&(n||i)||this.settings.type=="height"&&n||this.settings.type=="width"&&i){this.window_height=t;this.window_width=r;return true}return false}return true},checkHeight:function(e){return!this.settings.diff_height&&!this.settings.step_height&&e!=this.window_height||this.settings.diff_height&&(parseInt(this.settings.diff_height)<parseInt(this.window_height-e)||parseInt(this.settings.diff_height)*-1>parseInt(this.window_height-e))||typeof this.settings.step_height=="object"&&this.inStep(e,this.window_height,this.settings.step_height)},checkWidth:function(e){return!this.settings.diff_width&&!this.settings.step_width&&e!=this.window_width||this.settings.diff_width&&(parseInt(this.settings.diff_width)<parseInt(this.window_width-e)||parseInt(this.settings.diff_width)*-1>parseInt(this.window_width-e))||typeof this.settings.step_width=="object"&&this.inStep(e,this.window_width,this.settings.step_width)},delayEvent:function(){clearTimeout(this.timer);this.timer=setTimeout(e.proxy(this,"sendEvent"),parseInt(this.settings.timeout))},inStep:function(e,t,n){var r=n.length;for(var i=0;i<r;i++){if(n[i]==e||n[i]==t||n[i]<e&&n[i]>t||n[i]>e&&n[i]<t)return true}return false}}});e.fn.windowResize=function(t){return this.each(function(){if(undefined==e(this).data("windowResize")){if(this==window){e(this).data("windowResize",new e.windowResize(this,t))}else if(!undefined(t.callback)){e(this).resize(t.callback)}}})}})(jQuery)